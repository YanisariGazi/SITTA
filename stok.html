<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SITTA - Informasi Stok Bahan Ajar</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/logo-ut.png">
    <link rel="shortcut icon" href="assets/favicon.ico">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- <nav class="sidebar">
            <img src="assets/logo-ut.png" alt="Logo UT" class="sidebar-logo">
            <div class="sidebar-title">SITTA UT</div>
            <div class="sidebar-menu">
                <div class="sidebar-menu-item" onclick="navigateTo('dashboard.html')">
                    <span class="sidebar-menu-icon">
                        <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 8h2v-2H7v2zm0-4h2v-2H7v2zm0-8v2h2V5H7zm4 8h2v-2h-2v2zm0 4h2v-2h-2v2zm0-8h2V7h-2v2zm4 8h2v-2h-2v2zm0-4h2v-2h-2v2zm0-8v2h2V5h-2z" fill="#fbbf24"/></svg>
                    </span>
                    Dashboard
                </div>
                <div class="sidebar-menu-item active" onclick="navigateTo('stok.html')">
                    <span class="sidebar-menu-icon">
                        <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><path d="M4 6v12a2 2 0 002 2h12a2 2 0 002-2V6" stroke="#fbbf24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><rect x="4" y="6" width="16" height="4" fill="#2563eb"/><rect x="4" y="10" width="16" height="8" fill="#fbbf24"/></svg>
                    </span>
                    Stok Bahan Ajar
                </div>
                <div class="sidebar-menu-item" onclick="navigateTo('tracking.html')">
                    <span class="sidebar-menu-icon">
                        <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><rect x="3" y="7" width="18" height="13" rx="2" fill="#2563eb"/><path d="M3 7l9 6 9-6" stroke="#fbbf24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </span>
                    Tracking
                </div>
                <div class="sidebar-menu-item" onclick="showLaporanMenu()">
                    <span class="sidebar-menu-icon">
                        <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="4" fill="#fbbf24"/><path d="M8 16V8m4 8V12m4 4V10" stroke="#2563eb" stroke-width="2" stroke-linecap="round"/></svg>
                    </span>
                    Laporan
                </div>
                <div class="sidebar-menu-item" onclick="navigateTo('histori.html')">
                    <span class="sidebar-menu-icon">
                        <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><rect x="4" y="4" width="16" height="16" rx="4" fill="#2563eb"/><path d="M8 8h8v8H8V8z" fill="#fbbf24"/></svg>
                    </span>
                    Histori
                </div>
            </div>
        </nav> -->
        <div class="main-content">
            <div class="header-main">
                <div class="header-main-title">Informasi Stok Bahan Ajar</div>
                <div class="header-user">
                    <span id="userName">User</span>
                    <button class="header-logout-btn" onclick="showLogoutConfirmation()">Logout</button>
                </div>
            </div>
            <div class="action-section" style="margin-bottom: 24px; display: flex; justify-content: space-between; align-items: center;">
                <button onclick="navigateTo('dashboard.html')" class="btn-back">
                    <svg width="20" height="20" fill="none" viewBox="0 0 24 24">
                        <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Kembali ke Dashboard
                </button>
                <button onclick="showAddForm()" class="header-logout-btn">+ Tambah Bahan Ajar Baru</button>
            </div>
            <div id="addForm" class="greeting-card" style="display: none; margin-bottom: 24px;">
                <form id="bahanAjarForm" onsubmit="return addBahanAjar(event)" class="login-form">
                    <div>
                        <div class="form-group">
                            <label for="kodeLokasi">Kode Lokasi</label>
                            <input type="text" id="kodeLokasi" required>
                        </div>
                        <div class="form-group">
                            <label for="kodeBarang">Kode Barang</label>
                            <input type="text" id="kodeBarang" required>
                        </div>
                        <div class="form-group">
                            <label for="namaBarang">Nama Barang</label>
                            <input type="text" id="namaBarang" required>
                        </div>
                        <div class="form-group">
                            <label for="jenisBarang">Jenis Barang</label>
                            <input type="text" id="jenisBarang" required>
                        </div>
                        <div class="form-group">
                            <label for="edisi">Edisi</label>
                            <input type="text" id="edisi" required>
                        </div>
                        <div class="form-group">
                            <label for="stok">Stok</label>
                            <input type="number" id="stok" required>
                        </div>
                    </div>
                    <div style="margin-top: 18px; text-align: right;">
                        <button type="submit" class="header-logout-btn">Simpan</button>
                        <button type="button" onclick="hideAddForm()" class="header-logout-btn" style="background: #64748b; color: #fff; margin-left: 8px;">Batal</button>
                    </div>
                </form>
            </div>
            <div class="table-container" style="margin-bottom: 24px;">
                <table class="data-table" style="width: 100%; border-radius: 12px; overflow: hidden;">
                    <thead style="background: #2563eb; color: #fff;">
                        <tr>
                            <th>No</th>
                            <th>Kode Lokasi</th>
                            <th>Kode Barang</th>
                            <th>Nama Barang</th>
                            <th>Jenis</th>
                            <th>Edisi</th>
                            <th>Stok</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="bahanAjarTableBody">
                        <!-- Data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            <div class="summary-section" style="display: flex; gap: 24px;">
                <div class="greeting-card" style="flex:1; align-items: flex-start;">
                    <h4 style="color: var(--primary-dark); margin-bottom: 8px;">Total Jenis Bahan Ajar</h4>
                    <p class="summary-value" id="totalJenis" style="font-size: 1.5em; font-weight: 700;">0</p>
                </div>
                <div class="greeting-card" style="flex:1; align-items: flex-start;">
                    <h4 style="color: var(--primary-dark); margin-bottom: 8px;">Total Stok Bahan Ajar</h4>
                    <p class="summary-value" id="totalStok" style="font-size: 1.5em; font-weight: 700;">0</p>
                </div>
            </div>
            <footer class="app-footer">
                <p>Pemograman Berbasis Web - Tugas 1 - | <a href="https://github.com/YanisariGazi" target="_blank">Tsabit Djatmiko</a> | 052193588</p>
            </footer>
        </div>
    </div>
    <!-- Modal Logout Confirmation -->
    <div id="logoutModal" class="modal">
        <div class="modal-content confirmation-modal">
            <div class="confirmation-icon">⚠️</div>
            <h2>Konfirmasi Logout</h2>
            <p>Apakah Anda yakin ingin keluar dari sistem?</p>
            <div class="confirmation-buttons">
                <button onclick="confirmLogout()" class="btn-confirm-yes">Ya, Logout</button>
                <button onclick="closeLogoutConfirmation()" class="btn-confirm-no">Batal</button>
            </div>
        </div>
    </div>
    <script src="js/data.js"></script>
    <script src="js/script.js"></script>
    <script>
        // Check if user is logged in
        window.onload = function() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) {
                window.location.href = 'index.html';
                return;
            }
            const user = JSON.parse(currentUser);
            document.getElementById('userName').textContent = user.nama;
            loadBahanAjar();
        };
        function loadBahanAjar() {
            const tableBody = document.getElementById('bahanAjarTableBody');
            tableBody.innerHTML = '';
            let totalStok = 0;
            dataBahanAjar.forEach((item, index) => {
                const row = document.createElement('tr');
                let status = '';
                let statusClass = '';
                if (item.stok > 300) {
                    status = 'Aman';
                    statusClass = 'status-safe';
                } else if (item.stok >= 100 && item.stok <= 300) {
                    status = 'Menengah';
                    statusClass = 'status-medium';
                } else {
                    status = 'Hampir Habis';
                    statusClass = 'status-low';
                }
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${item.kodeLokasi}</td>
                    <td>${item.kodeBarang}</td>
                    <td>${item.namaBarang}</td>
                    <td>${item.jenisBarang}</td>
                    <td>${item.edisi}</td>
                    <td>${item.stok}</td>
                    <td><span class="status-badge ${statusClass}">${status}</span></td>
                `;
                tableBody.appendChild(row);
                totalStok += item.stok;
            });
            document.getElementById('totalJenis').textContent = dataBahanAjar.length;
            document.getElementById('totalStok').textContent = totalStok.toLocaleString('id-ID');
        }
        function showAddForm() {
            document.getElementById('addForm').style.display = 'block';
            document.getElementById('bahanAjarForm').scrollIntoView({ behavior: 'smooth' });
        }
        function hideAddForm() {
            document.getElementById('addForm').style.display = 'none';
            document.getElementById('bahanAjarForm').reset();
        }
        function addBahanAjar(event) {
            event.preventDefault();
            const newItem = {
                kodeLokasi: document.getElementById('kodeLokasi').value,
                kodeBarang: document.getElementById('kodeBarang').value,
                namaBarang: document.getElementById('namaBarang').value,
                jenisBarang: document.getElementById('jenisBarang').value,
                edisi: document.getElementById('edisi').value,
                stok: parseInt(document.getElementById('stok').value),
                cover: 'img/default.jpg'
            };
            dataBahanAjar.push(newItem);
            loadBahanAjar();
            hideAddForm();
            alert('Bahan ajar berhasil ditambahkan!');
        }
        function navigateTo(page) { window.location.href = page; }
        function showLogoutConfirmation() { document.getElementById('logoutModal').style.display = 'block'; }
        function closeLogoutConfirmation() { document.getElementById('logoutModal').style.display = 'none'; }
        function confirmLogout() { sessionStorage.removeItem('currentUser'); window.location.href = 'index.html'; }
        window.onclick = function(event) {
            const logoutModal = document.getElementById('logoutModal');
            if (event.target == logoutModal) { logoutModal.style.display = 'none'; }
        };
    </script>
</body>
</html>
